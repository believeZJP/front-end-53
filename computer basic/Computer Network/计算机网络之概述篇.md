计算机网络主要由一些通用的、 可编程的硬件互连而成，通过这些硬件，可以传送不同类型的数据，并且可以支持广泛和日益增长的应用。
- 计算机网络的不是软件概念，还包含硬件设备
- 计算机网络不仅仅是信息通信，还可以支持广泛的应用

按照作用范围分类：

- 广域网（WAN）
- 城域网（MAN）
- 局域网（LAN）

按照使用者分类：

- 公用网络
- 专用网络



## 互联网的发展历史

第一阶段：单个网络ARPANET

第二阶段：三级结构互联网

第三阶段：多层次ISP互联网，中国移动，中国联通，中国电信都是ISP

#### 中国五大主干网络

中国电信互联网CHINANET
中国联通互联网UNINET
中国移动互联网CMNET
中国教育与科研计算机网CERNET
中国科学技术网CSTNET

## 层次结构设计的基本原则

### 为什么要进行层次设计

- 保证数据通路顺畅
- 识别目的计算机
- 可以知道目的计算机的状态
- 检查数据是否错误

### 基本原则

- 各层之间是相互独立的
- 每一层要有足够的灵活性
- 各层之间完全解耦

## OSI七层模型

| 层         | 作用                            |
| ---------- | ------------------------------- |
| 应用层     | 为计算机用户提供接口和服务      |
| 表示层     | 数据处理(编码解码、加密解密等)  |
| 会话层     | 管理(建立、 维护、重连)通信会话 |
| 传输层     | 管理端到端的通信连接            |
| 网络层     | 数据路由(决定数据在网络的路径)  |
| 数据链路层 | 管理相邻节点之间的数据通信      |
| 物理层     | 数据通信的光电物理特性          |

OSI七层模型市场化过程中困难重重，最后没有成为广为使用的标准模型，因为TCP/IP在全球范围已成成功运行，并且这个模型太过理论化。

## TCP/IP四层模型

层级映射关系如下表：

| TCP/IP四层模型 | OSI七层模型            | 主要协议           |
| -------------- | ---------------------- | ------------------ |
| 应用层         | 应用层、表示层、会话层 | HTTP/FTP/SMTP/POP3 |
| 传输层         | 传输层                 | TCP/UDP            |
| 网络层         | 网络层                 | IP/ICMP            |
| 网络接口层     | 数据链路层、物理层     | Ethernet/ARP/RARP  |



## 现代互联网的网络拓扑

分为边缘部分和核心部分

![](https://s2.ax1x.com/2019/11/06/MiW334.md.png)

![](https://s2.ax1x.com/2019/11/06/MiW8gJ.md.png)

也可以用树状图的形式表示

![](https://s2.ax1x.com/2019/11/06/MiWGv9.md.png)

## 计算机性能的常用指标

为什么电信拉的100M光纤，测试峰值速度只有12M每秒？

答：网络常用单位是Mbps，1binary = 8bits，bps=bit/s
因此有 100M/s = 100Mbps = 100Mbit/s = (100/8)MB/s = 12.5MB/s

#### 时延

|          |                                              |                               |
| -------- | -------------------------------------------- | ----------------------------- |
| 发送时延 | 发送在本地停留的时间，受到计算机网卡限制     | 数据长度(bit)/发送速率(bit/s) |
| 传播时延 | 受到传播的距离/传播介质的限制                | 传播路径距离/传播速率(bit/s)  |
| 排队时延 | 数据包在网络设备中等待被处理的时间           |                               |
| 处理时延 | 数据包到达设备或者目的机器被处理所需要的时间 |                               |



总时延：上述四个加和

#### 往返时间RTT（Route-Trip Time）是评估网络质量的一项重要指标

RTT表示的是数据报文在端到端通信中的来回一次的时间，通常使用ping命令查看RTT

## 物理层概述

#### 物理层的作用

- 连接不同的物理设备
- 传输比特流

传输介质：双绞线，同轴电缆，光纤

#### 信道的基本概念

- 信道是往一个方向传送信息的媒体，和电路做区分
- 一条通信电路包含一个接受信道和一个发送信道

#### 信道的分类

单工通信信道

- 只能一个方向通信，没有反方向反馈的信道
- 有线电视、无线电收音机等等

半双工通信信道

- 双方都可以发送和接收信息
- 不能双方同时发送，也不能同时接收

全双工通信信道

- 双方都可以同时发送和接收信息

信道分用-复用技术

![](https://s2.ax1x.com/2019/11/06/MiqyHe.md.png)

- 频分复用
- 时分复用
- 波分复用
- 码分复用

## 数据链路层概述

- "帧”是数据链路层数据的基本单位
- 发送端在网络层的一段数据前后添加特定标记形成"帧"
- 接收端根据前后特定标记识别出“帧”

帧首部和尾部是特定的控制字符（特定比特流）

- 帧首部：SOH：00000001
- 帧尾部：EOT：00000100

透明传输：即使控制字符在帧数据中，但是要当作不存在的去处理。如果在数据中也存在EOT这种特殊字符，只需要在其之前加上一个转义字符ESC，如果连ESC也有，那么再加上一个ESC。

由于物理层只是传输比特流，无法控制是否出错。因此数据链路层会做“差错检测”。

## 数据链路层的差错监测

#### 奇偶校验码

举例：00110010 -> 0 + 0 + 1 +1 + 0 + 0 + 1 + 0 = 3，3是基数因此在后面增加一位1的到001100101。当发送端发送完成之后，接收端则可以根据这种规则进行数据校验。

这种方法比较简单，但是有一定的局限性，比如出错两位，奇偶校验码则检测不到错误了。

#### 循环冗余校验码CRC

- 一种根据传输或保存的数据而产生固定位数校验码的方法
- 检测数据传输或者保存后可能出现的错误
- 生成的数字计算出来并且附加到数据后面

采用模“2”操作，也就是“异或”操作

步骤：

- 选定一个用于校验的多项式G(x)，并在数据尾部添加r个0
- 将添加r个0后的数据，使用模"2” 除法除以多项式的位串
- 得到的余数填充在原数据r个0的位置得到可校验的位串

具体例子看视频讲解。 

- CRC的错误校验能力与位串的阶数r有关，如果r为1的话，其实就退化为奇偶校验码了。
- 数据链路层纸进行数据的监测，不进行纠正，如果数据有错误，则直接丢掉。
- CRC多项式很多，各自用于不同的目的。
- 这个才是网络中常用的监测方法。

## 最大传输单元MTU

- 最大传输单元MTU(Maximum Transmission Unit)
- 数据链路层的数据帧也不是无限大的
- 数据帧长度受MTU限制
- 数据帧过大过小都会影响传输效率
- 以太网MTU一般为1500字节

#### 路径MTU

发送端到接收端一般都是经过多个小型网络，各个小型网络之间的MTU也是不一样的，因此路径MTU就是整个传输过程中最小的MTU的值。